# 変更履歴

このプロジェクトの主な変更内容を記録します。

このフォーマットは [Keep a Changelog](https://keepachangelog.com/ja/1.0.0/) に基づいており、
バージョニングは [Semantic Versioning](https://semver.org/lang/ja/) に従います。

## [1.4.0] - 2025-11-18

### 削除

- **静的ファイルのコピー機能を削除**
  - `copyFiles` と `watchCopy` 機能を完全に削除
  - `dai-runner.config.js.example` から `documents`, `fonts`, `videos`, `vendor` のパス設定を削除
  - `tasks/misc/` ディレクトリを削除
  - ツールの責務を「SCSS、JavaScript、画像の処理」に限定

### 改善

- **設定ファイルのシンプル化**
  - 不要なパス設定を削除し、コアな機能に集中
  - 設定ファイルがより理解しやすく、保守しやすくなりました

### 理由

- フォント、動画、ドキュメントなどの静的ファイルは、通常ビルドプロセスに含める必要がない
- 必要な場合は手動でコピーするか、別のツールを使用する方がシンプル
- ツールの焦点を明確にすることで、保守性と使いやすさが向上

## [1.3.0] - 2025-11-17

### 追加

- **メイン設定ファイルの自動作成機能**
  - `dai-runner.config.js` が存在しない場合、`dai-runner.config.js.example` から自動的にコピーして作成
  - 初回実行時の設定ファイル不足エラーを防止
  - `precheck.js` スクリプトに自動作成処理を追加

### 改善

- **初回セットアップの体験向上**
  - `npm run dev` 実行時に必要なファイルがすべて自動生成されるようになりました
  - 手動でファイルをコピーする手間が不要に

## [1.2.3] - 2025-11-17

### 改善

- **設定ファイルのドキュメント改善**
  - `dai-runner.config.js` のコメントを `dai-runner.config.js.example` と同等の詳細度に統一
  - 各設定項目の説明、使用例、JSDoc コメントを追加
  - 設定ファイルの保守性と可読性が向上

## [1.2.2] - 2025-11-17

### 改善

- **キャッシュディレクトリの構造改善**
  - キャッシュディレクトリを `.dai-runner-cache` から `.dai-runner/cache` に変更
  - 将来的な拡張性を考慮した構造に改善（ログ、一時ファイルなども整理可能）
  - プロジェクトルートがより整理された状態を維持できるように改善

### 注意事項

- 既存のキャッシュディレクトリ `.dai-runner-cache/` は手動で削除可能です
- 次回ビルド時に新しい `.dai-runner/cache` ディレクトリが自動生成されます

## [1.2.1] - 2025-11-16

### 改善

- **設定ファイル生成の最適化**
  - `precheck.js` が `dai-runner.config.local.js.example` をコピーして生成する方式に変更
  - example ファイルが単一の真実の源泉となり、保守性が向上
  - 静的サイトモードの場合は example ファイルをそのままコピー
- **選択肢の順番を改善**
  - 最も一般的な「静的ファイルのみ (server)」を一番上に配置
  - 選択しやすい UI/UX 改善
- **用語の統一**
  - 「外部 WordPress」を「外部サーバー」に変更（より汎用的に）

### 修正

- 静的サイトモードでローカル設定ファイルが不要な場合も、2 回目以降の起動で質問されない改善

## [1.2.0] - 2025-11-16

### 追加

- **設定ファイルの分離機能**: チーム共有設定と個人設定を分離できるようになりました
  - `dai-runner.config.js`: チーム共有設定（Git 管理対象）
  - `dai-runner.config.local.js`: 個人の proxy 設定など（Git 管理対象外）
  - `dai-runner.config.local.js.example`: 新規メンバー向けテンプレート
- **自動設定生成の改善**: 初回実行時に `dai-runner.config.local.js` を自動生成
  - 開発環境タイプ（Traefik/外部 WordPress/静的ファイル）の選択
  - 選択に応じた最適な proxy 設定の自動生成
- **mode 設定のローカル化**: 開発環境のモード（server/proxy）を個人設定で切り替え可能に

### 変更

- `.gitignore`: `dai-runner.config.js` から `dai-runner.config.local.js` に変更
- `precheck.js`: ローカル設定ファイルの生成に対応
- NPM パッケージに `dai-runner.config.local.js.example` を追加

### メリット

- 個人のローカル環境設定をコミットせずに済む
- チーム共通設定の更新が全員に反映されやすくなる
- Git マージコンフリクトが発生しにくくなる
- 新規メンバーのオンボーディングが簡単に

### 移行ガイド

既存プロジェクトでは以下の 2 つの方法で利用できます：

1. **そのまま使用**: 既存の `dai-runner.config.js` をそのまま使用（互換性あり）
2. **設定分離**: proxy 設定を `dai-runner.config.local.js` に移動（推奨）

詳細は README.md を参照してください。

## [1.1.0] - 2025-11-16

### 修正

- **SCSS ファイル監視のバグ修正**: 新しい SCSS ファイルを追加した際にコンパイルされない問題を修正
  - 原因: 相対パスと絶対パスの比較エラー
  - 解決: `path.resolve()` を使用してパスを統一
- **JS ファイル削除時の不具合修正**: JS ファイルを削除した際に、対応する `.map` ファイルが残る問題を修正
  - ソースマップファイルも同時に削除するように改善

### 変更

- **依存パッケージの最適化**: WSL2 環境での安定動作のためにパッケージバージョンを調整
  - `chokidar`: `^4.0.3` → `^3.6.0` (ファイル監視の安定性向上)
  - `@rollup/plugin-node-resolve`: `^15.3.0` → `^16.0.1`
  - `autoprefixer`: `^10.4.20` → `^10.4.19`
  - `cssnano`: `^7.0.6` → `^6.1.2`
  - `glob`: `^11.0.0` → `^10.3.12`
  - `inquirer`: `^12.3.0` → `^12.9.4`
  - `postcss`: `^8.4.49` → `^8.4.38`
  - `postcss-discard-duplicates`: `^7.0.1` → `^6.0.3`
  - `postcss-normalize-charset`: `^7.0.0` → `^6.0.2`
  - `rollup`: `^4.28.1` → `^4.47.1`
  - `sass`: `^1.83.0` → `^1.75.0`
  - `sharp`: `^0.33.5` → `^0.33.3`
  - `svgo`: `^3.3.2` → `^3.2.0`
  - `terser`: `^5.36.0` → `^5.30.3`

### 注意事項

- WSL2 環境でファイル監視が動作しない場合は、このバージョンへのアップデートを推奨します
- 依存パッケージのバージョンを変更しているため、再インストールが必要です: `npm install`

## [1.0.0] - 2025-11-16

### 追加

- 初回リリース
- SCSS、JavaScript、画像ファイルの自動ビルド・最適化機能
- BrowserSync による開発サーバーとライブリロード機能
- ファイル監視による自動再ビルド機能
- 対話的な設定ファイル生成機能
- プロキシモードとサーバーモードのサポート
- 画像の自動最適化と WebP 変換機能
- CSS/JS のソースマップ生成機能
